{% comment %}
  Erfahrungen ‚Ä¢ Stats (zweispaltig, mit Badges & Karten)
  - Letzte Karte volle Breite, wenn sie alleine steht
  - √úberschrift als Richtext
{% endcomment %}

{{ 'erfahrungen-stats.css' | asset_url | stylesheet_tag }}

<section class="es-section"
  style="
    --es-bg-color: {{ section.settings.bg_color }};
    --es-card-bg-color: {{ section.settings.card_bg }};
    --es-card-br: {{ section.settings.card_radius }}px;
    --es-text-color: {{ section.settings.text_color }};
    --es-accent-color: {{ section.settings.accent_color }};
  "
>
  <div class="es-container es-grid">
    <!-- linke Spalte -->
    <div>
      {% if section.settings.kicker != blank %}
        <p class="es-kicker">{{ section.settings.kicker }}</p>
      {% endif %}

      {% if section.settings.heading != blank %}
        <div class="es-heading rte">{{ section.settings.heading }}</div>
      {% endif %}

      {% if section.settings.richtext != blank %}
        <div class="es-richtext rte">{{ section.settings.richtext }}</div>
      {% endif %}

      {%- assign badge_blocks = section.blocks | where: 'type', 'badge' -%}
      {% if badge_blocks.size > 0 %}
        <div class="es-badges" role="list">
          {% for block in badge_blocks %}
            <span class="es-badge" role="listitem" {{ block.shopify_attributes }}>
              {{ block.settings.badge_text }}
            </span>
          {% endfor %}
        </div>
      {% endif %}

      {% if section.settings.btn_label != blank and section.settings.btn_link != blank %}
        <a class="es-btn" href="{{ section.settings.btn_link }}" {% if section.settings.btn_newtab %}target="_blank" rel="noopener noreferrer"{% endif %}>
          {{ section.settings.btn_label }}
        </a>
      {% endif %}
    </div>

    <!-- rechte Spalte: Karten -->
    <div>
      <div class="es-cards">
        {%- assign stat_blocks = section.blocks | where: 'type', 'stat' -%}
        {% for block in stat_blocks %}
          {% render 'snippet-erfahrungen-stat-card',
            emoji: block.settings.emoji,
            title: block.settings.title,
            subtitle: block.settings.subtitle,
            featured: block.settings.featured,
            aria_label: block.settings.aria_label,
            block: block
          %}
        {% endfor %}
      </div>
    </div>
  </div>
</section>

<style>
/* Volle Breite f√ºr die letzte Karte, wenn sie alleine steht */
.es-cards > .es-card:last-child:nth-child(odd) {
  grid-column: 1 / -1;
}
</style>

{% schema %}
{
  "name": "Erfahrungen ‚Ä¢ Stats",
  "tag": "section",
  "class": "section-erfahrungen-stats",
  "settings": [
    { "type": "text", "id": "kicker", "label": "Kicker", "default": "√úber 15 Jahre Erfahrung" },
    { "type": "richtext", "id": "heading", "label": "√úberschrift (Richtext)", "default": "<p>Unsere Werte</p>" },
    { "type": "richtext", "id": "richtext", "label": "Text", "default": "<p>Als familiengef√ºhrtes Unternehmen legen wir Wert auf pers√∂nlichen Service und langfristige Kundenbeziehungen. Unser Team von √ºber 50 qualifizierten Mitarbeitenden sorgt t√§glich daf√ºr, dass mehr als 200 zufriedene Kund:innen auf unsere Zuverl√§ssigkeit vertrauen.</p>" },

    { "type": "text", "id": "btn_label", "label": "Button-Text", "default": "Mehr √ºber uns" },
    { "type": "url", "id": "btn_link", "label": "Button-Link" },
    { "type": "checkbox", "id": "btn_newtab", "label": "Link in neuem Tab √∂ffnen", "default": false },

    { "type": "color", "id": "bg_color", "label": "Hintergrund", "default": "#F3F8F5" },
    { "type": "color", "id": "card_bg", "label": "Karten-Hintergrund", "default": "#FFFFFF" },
    { "type": "range", "id": "card_radius", "min": 0, "max": 24, "step": 1, "unit": "px", "label": "Karten-Radius", "default": 16 },
    { "type": "color", "id": "text_color", "label": "Textfarbe", "default": "#111111" },
    { "type": "color", "id": "accent_color", "label": "Akzentfarbe", "default": "#22C55E" }
  ],
  "blocks": [
    {
      "type": "badge",
      "name": "Badge",
      "settings": [
        { "type": "text", "id": "badge_text", "label": "Badge-Text", "default": "200+ Kunden" }
      ]
    },
    {
      "type": "stat",
      "name": "Wert/Stat-Karte",
      "limit": 9,
      "settings": [
        { "type": "text", "id": "emoji", "label": "Icon/Emoji", "default": "‚úÖ" },
        { "type": "text", "id": "title", "label": "Titel", "default": "Qualit√§t durch Leidenschaft" },
        { "type": "text", "id": "subtitle", "label": "Untertitel", "default": "Sauberkeit ist f√ºr uns mehr als ein Ergebnis ‚Äì es ist unser Anspruch an Perfektion." },
        { "type": "checkbox", "id": "featured", "label": "Hervorheben (Umriss)", "default": false },
        { "type": "text", "id": "aria_label", "label": "Beschriftung Screenreader", "default": "Wert/Stat-Karte" }
      ]
    }
  ],
  "presets": [
    {
      "name": "Erfahrungen ‚Ä¢ Stats",
      "blocks": [
        { "type": "badge", "settings": { "badge_text": "200+ Kunden" } },
        { "type": "badge", "settings": { "badge_text": "150+ Besch√§ftigte" } },
        { "type": "badge", "settings": { "badge_text": "20+ Jahre Erfahrung" } },

        { "type": "stat", "settings": { "emoji": "‚úÖ", "title": "Regional verwurzelt ‚Äì √ºberregional stark", "subtitle": "Wir stehen f√ºr saarl√§ndische Verl√§sslichkeit mit professionellem Anspruch." } },
        { "type": "stat", "settings": { "emoji": "‚úÖ", "title": "Qualit√§t durch Leidenschaft", "subtitle": "Sauberkeit ist f√ºr uns mehr als ein Ergebnis ‚Äì es ist unser Anspruch an Perfektion.", "featured": true } },
        { "type": "stat", "settings": { "emoji": "‚úÖ", "title": "Menschen im Mittelpunkt", "subtitle": "Schulung, Sicherheit und Wertsch√§tzung sind f√ºr uns selbstverst√§ndlich." } },
        { "type": "stat", "settings": { "emoji": "üå±", "title": "Nachhaltigkeit im Blick", "subtitle": "Moderne, ressourcenschonende Verfahren f√ºr gelebte Praxis." } },
        { "type": "stat", "settings": { "emoji": "ü§ù", "title": "Partnerschaft auf Augenh√∂he", "subtitle": "Wir h√∂ren zu, verstehen Bed√ºrfnisse und liefern L√∂sungen, die passen." } }
      ]
    }
  ]
}
{% endschema %}
