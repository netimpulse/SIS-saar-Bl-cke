
{% comment %}
  **
  * Angepasster "Über Uns" Abschnitt (Version 4 - Bild-Icons)
  *
  * - NEU: Pro Feature kann zwischen SVG-Icon und Bild-Icon gewählt werden.
  * - Lädt eine externe CSS-Datei für statische Stile.
  * - Definiert CSS-Variablen für dynamische Einstellungen aus dem Editor.
  *
  {% endcomment %}

{{ 'section-ueber-uns-layout.css' | asset_url | stylesheet_tag }}

<style>
  #shopify-section-{{ section.id }} {
    --background-color: {{ section.settings.background_color }};
    --section-padding-top: {{ section.settings.section_padding_top }}px;
    --section-padding-bottom: {{ section.settings.section_padding_bottom }}px;
    
    --title-color: {{ section.settings.title_color }};
    --title-font-size: {{ section.settings.title_font_size }}px;

    --text-color: {{ section.settings.text_color }};
    --text-font-size: {{ section.settings.text_font_size }}px;
    
    --image-border-radius: {{ section.settings.image_border_radius }}px;
    
    --features-per-row: {{ section.settings.features_per_row }};
    --icon-size: {{ section.settings.icon_size }}px;
    --icon-color: {{ section.settings.icon_color }};
    --feature-title-color: {{ section.settings.feature_title_color }};
  }
</style>

<div class="sis-about-section">
  <div class="sis-about__container">
    <div class="sis-about__grid {% if section.settings.layout_direction == 'image_left' %}sis-about__grid--image-left{% endif %}">
      
      {%- liquid
        assign image_on_left = false
        if section.settings.layout_direction == 'image_left'
          assign image_on_left = true
        endif
      -%}

      {%- if image_on_left -%}
        {%- render 'about-image', section: section -%}
      {%- endif -%}

      <div class="sis-about__content">
        <h2 class="sis-about__title">{{ section.settings.title }}</h2>
        <div class="sis-about__description">
          {{ section.settings.description }}
        </div>
        
        {% if section.blocks.size > 0 %}
          <div class="sis-about__features">
            {% for block in section.blocks %}
              <div class="sis-about__feature" {{ block.shopify_attributes }}>
                <div class="sis-about__feature-icon">
                  
                  {%- comment -%}
                    {%- endcomment -%}
                  {% if block.settings.icon_type == 'image' and block.settings.icon_image != blank %}
                    <img 
                      src="{{ block.settings.icon_image | image_url: width: 120, height: 120 }}"
                      alt="{{ block.settings.feature_title | escape }}"
                      style="width: {{ section.settings.icon_size }}px; height: auto;"
                      width="{{ section.settings.icon_size }}"
                      height="{{ section.settings.icon_size }}"
                      loading="lazy">
                  {% elsif block.settings.icon_type == 'svg' and block.settings.icon_svg != blank %}
                    {{ block.settings.icon_svg }}
                  {% endif %}

                </div>
                <div class="sis-about__feature-text">
                  <h4 class="sis-about__feature-title">{{ block.settings.feature_title }}</h4>
                  <p class="sis-about__feature-description">{{ block.settings.feature_description }}</p>
                </div>
              </div>
            {% endfor %}
          </div>
        {% endif %}
      </div>

      {%- unless image_on_left -%}
        {%- render 'about-image', section: section -%}
      {%- endunless -%}

    </div>
  </div>
</div>

{% schema %}
  {
    "name": "Über Uns (Layout)",
    "tag": "section",
    "class": "section",
    "settings": [
      {
        "type": "header",
        "content": "Layout & Abstände"
      },
      {
        "type": "select",
        "id": "layout_direction",
        "label": "Layout-Richtung",
        "options": [
          { "value": "text_left", "label": "Text links, Bild rechts" },
          { "value": "image_left", "label": "Bild links, Text rechts" }
        ],
        "default": "text_left"
      },
      {
        "type": "color",
        "id": "background_color",
        "label": "Hintergrundfarbe",
        "default": "#FFFFFF"
      },
      {
        "type": "range",
        "id": "section_padding_top",
        "label": "Abstand oben",
        "min": 0, "max": 150, "step": 5, "unit": "px", "default": 80
      },
      {
        "type": "range",
        "id": "section_padding_bottom",
        "label": "Abstand unten",
        "min": 0, "max": 150, "step": 5, "unit": "px", "default": 80
      },
      {
        "type": "header",
        "content": "Textinhalt"
      },
      {
        "type": "text",
        "id": "title",
        "label": "Titel",
        "default": "Über uns"
      },
      {
        "type": "color",
        "id": "title_color",
        "label": "Titel Farbe",
        "default": "#000000"
      },
      {
        "type": "range",
        "id": "title_font_size",
        "label": "Titel Schriftgröße",
        "min": 24, "max": 56, "step": 2, "unit": "px", "default": 40
      },
      {
        "type": "richtext",
        "id": "description",
        "label": "Beschreibungstext",
        "default": "<p>Wir sind SIS Saar - ein innovatives Unternehmen mit zwei spezialisierten Geschäftsbereichen. Seit über zwei Jahrzehnten stehen wir für zuverlässige und hochwertige Serviceleistungen in der Region.</p><p>Unser Erfolgsrezept liegt in der Kombination aus langjähriger Erfahrung, modernster Technik und einem motivierten Team von Fachkräften. Jeder Mitarbeiter trägt dazu bei, dass wir unseren Kunden stets erstklassige Lösungen anbieten können.</p>"
      },
      {
        "type": "color",
        "id": "text_color",
        "label": "Text Farbe",
        "default": "#6B7280"
      },
      {
        "type": "range",
        "id": "text_font_size",
        "label": "Text Schriftgröße",
        "min": 14, "max": 22, "step": 1, "unit": "px", "default": 18
      },
      {
        "type": "header",
        "content": "Bild"
      },
      {
        "type": "image_picker",
        "id": "image",
        "label": "Bild"
      },
      {
        "type": "range",
        "id": "image_border_radius",
        "label": "Bild Eckenrundung",
        "min": 0, "max": 40, "step": 2, "unit": "px", "default": 12
      },
      {
        "type": "text",
        "id": "image_alt",
        "label": "Bild Alt-Text",
        "info": "Wichtig für SEO und Barrierefreiheit."
      },
      {
        "type": "header",
        "content": "Features (Punkte mit Icons)"
      },
      {
        "type": "select",
        "id": "features_per_row",
        "label": "Elemente pro Zeile (Desktop)",
        "options": [
          {
            "value": "1",
            "label": "1"
          },
          {
            "value": "2",
            "label": "2"
          }
        ],
        "default": "2"
      },
      {
        "type": "range",
        "id": "icon_size",
        "label": "Icon Größe",
        "min": 24, "max": 48, "step": 2, "unit": "px", "default": 32
      },
      {
        "type": "color",
        "id": "icon_color",
        "label": "SVG-Icon Farbe",
        "info": "Gilt nur für SVG-Icons.",
        "default": "#34D399"
      },
      {
        "type": "color",
        "id": "feature_title_color",
        "label": "Feature Titel Farbe",
        "default": "#111827"
      }
    ],
    "blocks": [
      {
        "type": "feature",
        "name": "Feature Punkt",
        "settings": [
          {
            "type": "header",
            "content": "Icon"
          },
          {
            "type": "select",
            "id": "icon_type",
            "label": "Icon-Typ",
            "options": [
              { "value": "svg", "label": "SVG-Code" },
              { "value": "image", "label": "Bild" }
            ],
            "default": "svg"
          },
          {
            "type": "html",
            "id": "icon_svg",
            "label": "SVG Code",
            "info": "Wird verwendet, wenn Icon-Typ 'SVG-Code' ist."
          },
          {
            "type": "image_picker",
            "id": "icon_image",
            "label": "Icon-Bild",
            "info": "Wird verwendet, wenn Icon-Typ 'Bild' ist."
          },
          {
            "type": "header",
            "content": "Inhalt"
          },
          {
            "type": "text",
            "id": "feature_title",
            "label": "Titel",
            "default": "Feature Titel"
          },
          {
            "type": "text",
            "id": "feature_description",
            "label": "Beschreibung",
            "default": "Kurze Beschreibung des Features."
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "Über Uns (Layout)",
        "blocks": [
          {
            "type": "feature"
          },
          {
            "type": "feature"
          }
        ]
      }
    ]
  }
{% endschema %}
