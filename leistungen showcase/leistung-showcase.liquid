{% comment %}
  Section: Leistung Showcase
  Desktop:
    - Zwei Spalten: Bild (links/rechts einstellbar) + rechte Spalte mit Text und ALLEM Bullet-Content
  Mobile:
    - Reihenfolge: Bild -> Text -> Punkte
{% endcomment %}

{{ 'leistung-showcase.css' | asset_url | stylesheet_tag }}

<section class="lsc-section"
  style="
    --lsc-bg: {{ section.settings.bg_color }};
    --lsc-pad: {{ section.settings.section_padding }}px;
    --lsc-radius: {{ section.settings.image_radius }}px;
    --lsc-bullet: {{ section.settings.bullet_color }};
  "
>
  <div class="lsc-inner">

    <div class="lsc-grid lsc-pos-{{ section.settings.image_position }}">
      {%- comment -%} Spalte: Bild {%- endcomment -%}
      <div class="lsc-media">
        {%- if section.settings.main_image != blank -%}
          {{ section.settings.main_image
            | image_url: width: 1400
            | image_tag: loading: 'lazy', sizes: '(min-width: 990px) 720px, 100vw', class: 'lsc-img', alt: section.settings.heading | escape }}
        {%- else -%}
          <div class="lsc-img lsc-img--placeholder" aria-hidden="true"></div>
        {%- endif -%}
      </div>

      {%- comment -%} Spalte: Text + Punkte (untereinander) {%- endcomment -%}
      <div class="lsc-rightcol">
        <div class="lsc-content">
          {%- if section.settings.heading != blank -%}
            <h2 class="lsc-heading">{{ section.settings.heading }}</h2>
          {%- endif -%}
          {%- if section.settings.subtext != blank -%}
            <div class="lsc-text rte">{{ section.settings.subtext }}</div>
          {%- endif -%}
        </div>

        <aside class="lsc-aside">
          {%- for block in section.blocks -%}
            {%- if block.type == 'showcase_group' -%}
              {% render 'point-group-showcase',
                title: block.settings.title,
                items: block.settings.items,
                as_card: block.settings.as_card,
                card_bg: block.settings.card_bg,
                card_border: block.settings.card_border,
                id: block.id
              %}
            {%- endif -%}
          {%- endfor -%}
        </aside>
      </div>
    </div>

  </div>
</section>

{% schema %}
{
  "name": "Leistung Showcase",
  "settings": [
    { "type": "text", "id": "heading", "label": "Überschrift", "default": "Überschrift bei Überschrift" },
    { "type": "richtext", "id": "subtext", "label": "Einleitungstext", "default": "<p>hier steht ein text</p>" },

    { "type": "image_picker", "id": "main_image", "label": "Bild" },
    { "type": "range", "id": "image_radius", "min": 0, "max": 40, "step": 1, "unit": "px", "label": "Bild-Abrundung", "default": 12 },
    {
      "type": "select",
      "id": "image_position",
      "label": "Bild-Position (Desktop)",
      "default": "left",
      "options": [
        { "value": "left", "label": "Links" },
        { "value": "right", "label": "Rechts" }
      ]
    },

    { "type": "color", "id": "bg_color", "label": "Hintergrundfarbe Gesamtab­schnitt", "default": "#F6F8FB" },
    { "type": "color", "id": "bullet_color", "label": "Farbe der Bullet-Punkte", "default": "#2B6CB0" },
    { "type": "range", "id": "section_padding", "min": 0, "max": 80, "step": 4, "unit": "px", "label": "Innenabstand", "default": 24 }
  ],
  "blocks": [
    {
      "type": "showcase_group",
      "name": "Punkt-Gruppe",
      "settings": [
        { "type": "text", "id": "title", "label": "Gruppen-Überschrift", "default": "Unsere Dienstleistungen:" },
        { "type": "textarea", "id": "items", "label": "Punkte (je Zeile ein Punkt)", "default": "Unterhaltsreinigung\nPraxisreinigung\nTreppenhausreinigung\nGlas- und Fensterreinigung" },
        { "type": "checkbox", "id": "as_card", "label": "Als Kachel darstellen", "default": true },
        { "type": "color", "id": "card_bg", "label": "Kachel Hintergrund", "default": "#FFFFFF" },
        { "type": "color", "id": "card_border", "label": "Kachel Rahmenfarbe", "default": "#E5E8EE" }
      ]
    }
  ],
  "max_blocks": 12,
  "presets": [
    {
      "name": "Leistung Showcase",
      "blocks": [
        { "type": "showcase_group" },
        { "type": "showcase_group" }
      ]
    }
  ]
}
{% endschema %}
