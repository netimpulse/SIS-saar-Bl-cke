{% comment %}
  Section: Leistungen überarbeitet
{% endcomment %}

{{ 'leistungen-ueberarbeitet.css' | asset_url | stylesheet_tag }}

{%- assign section_id = 'services-' | append: section.id -%}

<section id="{{ section_id }}"
  class="leh-container"
  style="
    --leh-bg: {{ section.settings.bg_color }};
    --leh-text: {{ section.settings.text_color }};
    --leh-accent: {{ section.settings.accent_color }};
    --leh-card-bg: {{ section.settings.card_bg }};
    --leh-card-hover-bg: {{ section.settings.card_hover_bg }};
    --leh-card-radius: {{ section.settings.card_radius }}px;
    --leh-card-lift: {{ section.settings.card_hover_lift | divided_by: 10.0 }}rem;
    --leh-gap: {{ section.settings.grid_gap }}px;
    --leh-pad: {{ section.settings.section_padding }}px;
    --leh-font-head: {{ section.settings.font_heading.family }}, {{ section.settings.font_heading.fallback_families }};
    --leh-font-body: {{ section.settings.font_body.family }}, {{ section.settings.font_body.fallback_families }};
    --leh-btn-bg: {{ section.settings.button_bg }};
    --leh-btn-text: {{ section.settings.button_text }};
    --leh-btn-hover-bg: {{ section.settings.button_hover_bg }};
    --leh-btn-radius: {{ section.settings.button_radius }}px;
  "
>
  <div class="leh-inner">
    {%- if section.settings.heading != blank -%}
      <h2 class="leh-heading">{{ section.settings.heading }}</h2>
    {%- endif -%}

    {%- if section.settings.subtext != blank -%}
      <p class="leh-subtext">{{ section.settings.subtext }}</p>
    {%- endif -%}

    <div class="leh-grid">
      {%- for block in section.blocks -%}
        {%- if block.type == 'service_card_lue' -%}
          {% render 'service-card-leistung-ueberarbeitet',
            image: block.settings.image,
            title: block.settings.title,
            text: block.settings.text,
            link_url: block.settings.link_url,
            link_label: block.settings.link_label,
            id: block.id
          %}
        {%- endif -%}
      {%- endfor -%}
    </div>

    {%- if section.settings.show_button and section.settings.button_label != blank -%}
      <div class="leh-cta-wrap" style="text-align: {{ section.settings.button_align }};">
        <a class="leh-btn" href="{{ section.settings.button_url | default: '#' }}">
          {{ section.settings.button_label }}
        </a>
      </div>
    {%- endif -%}
  </div>
</section>

{% schema %}
{
  "name": "Leistungen überarbeitet",
  "settings": [
    { "type": "text", "id": "heading", "label": "Überschrift", "default": "What We Offer" },
    { "type": "textarea", "id": "subtext", "label": "Einleitungstext", "default": "Use these sections to highlight your features. Keep it short and attractive." },

    { "type": "font_picker", "id": "font_heading", "label": "Schrift – Überschriften", "default": "helvetica_n4" },
    { "type": "font_picker", "id": "font_body", "label": "Schrift – Fließtext", "default": "helvetica_n4" },

    { "type": "color", "id": "bg_color", "label": "Hintergrundfarbe (Section)", "default": "#F3F6F9" },
    { "type": "color", "id": "text_color", "label": "Textfarbe", "default": "#222222" },
    { "type": "color", "id": "accent_color", "label": "Akzentfarbe (Links/Details)", "default": "#ff6a00" },

    { "type": "header", "content": "Kacheln" },
    { "type": "color", "id": "card_bg", "label": "Kachel Hintergrund", "default": "#ffffff" },
    { "type": "color", "id": "card_hover_bg", "label": "Kachel Hover-Hintergrund", "default": "#ffffff" },
    { "type": "range", "id": "card_radius", "min": 0, "max": 30, "step": 1, "unit": "px", "label": "Abrundung der Kacheln", "default": 12 },
    { "type": "range", "id": "card_hover_lift", "min": 0, "max": 12, "step": 1, "unit": "px", "label": "Hover-Lift (Schatten/Anheben)", "default": 6 },
    { "type": "range", "id": "grid_gap", "min": 8, "max": 40, "step": 2, "unit": "px", "label": "Abstand zwischen Kacheln", "default": 20 },

    { "type": "header", "content": "Abstände" },
    { "type": "range", "id": "section_padding", "min": 0, "max": 80, "step": 4, "unit": "px", "label": "Innenabstand (Section)", "default": 24 },

    { "type": "header", "content": "Button unter den Kacheln" },
    { "type": "checkbox", "id": "show_button", "label": "Button anzeigen", "default": true },
    { "type": "text", "id": "button_label", "label": "Button-Text", "default": "Schaltflächenbeschriftung" },
    { "type": "url", "id": "button_url", "label": "Button-Link" },
    { "type": "select", "id": "button_align", "label": "Ausrichtung", "default": "center", "options": [
      { "value": "left", "label": "Links" },
      { "value": "center", "label": "Zentriert" },
      { "value": "right", "label": "Rechts" }
    ]},
    { "type": "color", "id": "button_bg", "label": "Button Hintergrund", "default": "#8B8E93" },
    { "type": "color", "id": "button_hover_bg", "label": "Button Hover", "default": "#6f7276" },
    { "type": "color", "id": "button_text", "label": "Button Textfarbe", "default": "#ffffff" },
    { "type": "range", "id": "button_radius", "min": 0, "max": 40, "step": 1, "unit": "px", "label": "Button-Abrundung", "default": 20 }
  ],
  "blocks": [
    {
      "type": "service_card_lue",
      "name": "Kachel",
      "settings": [
        { "type": "image_picker", "id": "image", "label": "Bild" },
        { "type": "text", "id": "title", "label": "Titel", "default": "We Understand Requirements" },
        { "type": "textarea", "id": "text", "label": "Beschreibung", "default": "Sed sit amet sapien sit amet odio lobortis ullamcorper quis vel nisl. Nam blandit maximus tristique." },
        { "type": "url", "id": "link_url", "label": "Learn more – Link" },
        { "type": "text", "id": "link_label", "label": "Learn more – Text", "default": "Learn More →" }
      ]
    }
  ],
  "max_blocks": 12,
  "presets": [
    {
      "name": "Leistungen überarbeitet",
      "blocks": [
        { "type": "service_card_lue" },
        { "type": "service_card_lue" },
        { "type": "service_card_lue" }
      ]
    }
  ]
}
{% endschema %}
