{% comment %} Leistung Showcase – Punkte-Container + Icons je Punkt {% endcomment %}
{{ 'leistung-showcase.css' | asset_url | stylesheet_tag }}

<section class="lsc-section"
  style="
    --lsc-bg: {{ section.settings.bg_color }};
    --lsc-pad: {{ section.settings.section_padding }}px;
    --lsc-radius: {{ section.settings.image_radius }}px;
    --lsc-bullet: {{ section.settings.fallback_bullet_color }};
    --lsc-card-bg: {{ section.settings.points_bg }};
    --lsc-card-bd: {{ section.settings.points_border }};
  "
>
  <div class="lsc-inner">
    <div class="lsc-grid lsc-pos-{{ section.settings.image_position }}">

      <!-- Bild -->
      <div class="lsc-media">
        {%- if section.settings.main_image != blank -%}
          {{ section.settings.main_image
            | image_url: width: 1400
            | image_tag: loading: 'lazy', sizes: '(min-width: 990px) 720px, 100vw', class: 'lsc-img', alt: section.settings.heading | escape }}
        {%- else -%}
          <div class="lsc-img lsc-img--placeholder" aria-hidden="true"></div>
        {%- endif -%}
      </div>

      <!-- Text + Punkte-Container -->
      <div class="lsc-rightcol">
        <div class="lsc-content">
          {%- if section.settings.heading != blank -%}
            <h2 class="lsc-heading">{{ section.settings.heading }}</h2>
          {%- endif -%}
          {%- if section.settings.subtext != blank -%}
            <div class="lsc-text rte">{{ section.settings.subtext }}</div>
          {%- endif -%}
        </div>

        <aside class="lsc-points{% if section.settings.points_as_card %} is-card{% endif %}">
          {%- if section.settings.points_title != blank -%}
            <h3 class="lsc-points-title">{{ section.settings.points_title }}</h3>
          {%- endif -%}

          <div class="lsc-points-list">
            {%- for block in section.blocks -%}
              {%- if block.type == 'showcase_item' -%}
                {% render 'point-item-showcase',
                  icon: block.settings.icon,
                  text: block.settings.text,
                  id: block.id
                %}
              {%- endif -%}
            {%- endfor -%}
          </div>

          {%- if section.settings.points_btn_label != blank -%}
            <div class="lsc-points-cta" style="text-align: {{ section.settings.points_btn_align }};">
              <a class="lsc-btn" href="{{ section.settings.points_btn_url | default: '#' }}">
                {{ section.settings.points_btn_label }}
              </a>
            </div>
          {%- endif -%}
        </aside>
      </div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Leistung Showcase",
  "settings": [
    { "type": "text", "id": "heading", "label": "Überschrift", "default": "Überschrift bei Überschrift" },
    { "type": "richtext", "id": "subtext", "label": "Einleitungstext", "default": "<p>hier steht ein text</p>" },

    { "type": "image_picker", "id": "main_image", "label": "Bild" },
    { "type": "range", "id": "image_radius", "min": 0, "max": 40, "step": 1, "unit": "px", "label": "Bild-Abrundung", "default": 12 },
    { "type": "select", "id": "image_position", "label": "Bild-Position (Desktop)", "default": "left",
      "options": [{"value":"left","label":"Links"},{"value":"right","label":"Rechts"}] },

    { "type": "color", "id": "bg_color", "label": "Hintergrundfarbe Abschnitt", "default": "#F6F8FB" },
    { "type": "range", "id": "section_padding", "min": 0, "max": 80, "step": 4, "unit": "px", "label": "Innenabstand", "default": 24 },

    { "type": "header", "content": "Punkte-Container" },
    { "type": "text", "id": "points_title", "label": "Titel Punkte-Container", "default": "Unsere Dienstleistungen:" },
    { "type": "checkbox", "id": "points_as_card", "label": "Container als Kachel", "default": true },
    { "type": "color", "id": "points_bg", "label": "Container-Hintergrund", "default": "#FFFFFF" },
    { "type": "color", "id": "points_border", "label": "Container-Rahmen", "default": "#E5E8EE" },

    { "type": "text", "id": "points_btn_label", "label": "Button-Text im Punkte-Container", "default": "Jetzt anfragen" },
    { "type": "url", "id": "points_btn_url", "label": "Button-Link" },
    { "type": "select", "id": "points_btn_align", "label": "Button-Ausrichtung", "default": "left",
      "options": [{"value":"left","label":"Links"},{"value":"center","label":"Zentriert"},{"value":"right","label":"Rechts"}] },

    { "type": "color", "id": "fallback_bullet_color", "label": "Fallback-Bullet-Farbe (wenn kein Icon)", "default": "#2B6CB0" }
  ],
  "blocks": [
    {
      "type": "showcase_item",
      "name": "Punkt",
      "settings": [
        { "type": "image_picker", "id": "icon", "label": "Icon (SVG/PNG)" },
        { "type": "richtext", "id": "text", "label": "Text (mehrzeilig möglich)", "default": "<p>hier steht ein text</p>" }
      ]
    }
  ],
  "max_blocks": 30,
  "presets": [{"name":"Leistung Showcase","blocks":[{"type":"showcase_item"},{"type":"showcase_item"}]}]
}
{% endschema %}
